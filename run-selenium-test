pipeline {
    agent any
    options {
        buildDiscarder(logRotator(numToKeepStr:'10'))
        disableConcurrentBuilds()
    }
    stages {
        
         stage('Checkout external proj') {
            steps {
                git branch: 'main',
                    credentialsId: 'veljko-git',
                    url: 'https://github.com/veljkostevanic1996/branko-selenium-tests.git'

                sh "ls -lat"
            }
        }
        
        stage('Build') {
            steps {
                catchError(buildResult: null, catchInterruptions: false) {
                     maven(maven : 'Maven_3.5.2'){
                        bat "mvn clean verify"
                    }
                }
            }

            post {
                always {
                    echo "CurrentResult: $currentBuild.currentResult" // -> UNSTABLE
                    echo "Result: $currentBuild.result"               // -> UNSTABLE
                }
            }
        }
        
    }
}
